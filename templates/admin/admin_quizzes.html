{% extends '/admin/admin_layout.html' %}

{% block headContent %}
<script defer src="/static/js/adminquiz.js"></script>
{% endblock headContent %}

{% block title %}
Admin All Quizzes
{% endblock %}

{% block content %}
<div class="container">
    <div class="row my-2 d-flex align-items-center">
        <div class="col-lg-6 col-sm-12 d-flex gx-2 my-1">
            <a class="spl-button fs-7" data-bs-toggle="modal" data-bs-target="#quizmodal">
                <span></span>
                Add Quiz +
            </a>
            <a class="spl-button fs-7" href="/admin/quiz/leaderboard">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor"
                    class="bi bi-trophy-fill" viewBox="0 0 16 16">
                    <path
                        d="M2.5.5A.5.5 0 0 1 3 0h10a.5.5 0 0 1 .5.5c0 .538-.012 1.05-.034 1.536a3 3 0 1 1-1.133 5.89c-.79 1.865-1.878 2.777-2.833 3.011v2.173l1.425.356c.194.048.377.135.537.255L13.3 15.1a.5.5 0 0 1-.3.9H3a.5.5 0 0 1-.3-.9l1.838-1.379c.16-.12.343-.207.537-.255L6.5 13.11v-2.173c-.955-.234-2.043-1.146-2.833-3.012a3 3 0 1 1-1.132-5.89A33.076 33.076 0 0 1 2.5.5zm.099 2.54a2 2 0 0 0 .72 3.935c-.333-1.05-.588-2.346-.72-3.935zm10.083 3.935a2 2 0 0 0 .72-3.935c-.133 1.59-.388 2.885-.72 3.935z" />
                </svg>
                <span></span>
                Leaderboard
            </a>
        </div>
    </div>

    <div class="announcement_box">
        <div class="row d-flex my-3 g-3">
            <div class="col-lg-6 col-sm-12">
                <h5 class="main-font text-black fs-5 mb-4">
                    All Quiz
                </h5>
            </div>

            {% for ele in quizzes %}
            <div class="bg-teal shadow p-3 my-2 mb-3 rounded-3" style="border: 3px solid var(--navbar);">
                <p class='text-black fs-7 mb-0'>
                    ID:
                    {{ele.quiz_id}}
                </p>
                <p class='text-red fs-4 fw-bold mb-1' style="text-transform:capitalize;">
                    {{ele.question}}
                </p>
                <p class='text-black fs-7 my-1'>
                    Date Added: {{ele.date}}
                </p>
                <div class="d-flex" style="margin-top:2%">
                    <a href={{"/admin/quiz/{}/details".format(ele.quiz_id)}}
                        class="btn bg-brown text-beige py-1 px-2 fs-7">VIEW
                    </a>
                    &nbsp;
                    <a href={{ "/admin/quiz/{}/deletequiz" .format(ele.quiz_id)}}
                        class="btn btn-outline-danger py-1 px-2 fs-7 border-2">
                        DELETE
                    </a>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    <div class="modal fade" id="quizmodal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Add New Quiz</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>

                <form class="modal-body" id="QuizForm" action='/admin/add-quiz/new' method="post">
                    {{quizform.csrf_token}}
                    <p class="mb-0 fs-7 main-font">
                        Quiz Question
                    </p>
                    <input type="text" class="input_value" placeholder="Quiz Question" name="question">

                    <p class="mb-0 fs-7 main-font">
                        Question Point
                    </p>
                    <input type="text" class="input_value" placeholder="Question Point" name="ques_point">

                    <p class="mb-0 fs-7 main-font">
                        Total No. Of options quiz will have
                    </p>
                    <div class="row d-flex align-items-center w-100 my-1">
                        <div class="col-3 m-0 pe-0">
                            <input type="number" id="optionsNumber" name="optionsNumber" required class="p-1 rounded-3"
                                value="2" min="2" max="5" style="width: 90%;border: 1px solid lightgray;">
                        </div>
                        <div class="col-7 m-0 ps-0">
                            <button type="button" class="up-button bg-red text-light fs-7 py-1"
                                id="addNewQuizOptionBtn">
                                Add +
                            </button>
                        </div>
                    </div>

                    <!-- inputs will come from quiz.js -->
                    <div id="quiz-form"></div>
                    <button type="submit" class="up-button bg-red text-light w-100 my-2">
                        Save & Add next
                        Question
                    </button>
                </form>
            </div>
        </div>
    </div>
</div>
{% endblock %}