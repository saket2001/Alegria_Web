{% extends '/admin/admin_layout.html' %}


{% block headContent %}

<script defer src="/static/js/ckeditor/ckeditor.js"></script>

<script defer>
  window.onload = function () {
    CKEDITOR.replace('editor');
  };
</script>

{% endblock headContent %}


{% block title %}
All Events
{% endblock %}


{% block content %}
<br>
<div class="row gy-3 d-flex align-items-center my-2">
  <div class="col-lg-auto col-sm-4 my-1">
    <button class="normal-button d-flex justify-content-center align-items-center fs-6" data-bs-toggle="modal"
      data-bs-target="#exampleModal">
      Add New Event +
    </button>
  </div>
  <!-- <div class="col-lg-auto col-sm-8 my-1">
    <a href="/admin/events/event-registrations" class="button outline_btn fs-7 text-black">Event Registration</a>
  </div> -->
</div>
<!-- List -->
<div class="row g-2 w-100 d-flex align-items-center justify-content-between py-3">
  <div class="col-lg-4 col-sm-12">
    <h5 class="fs-5 fw-bold">All Events</h5>
  </div>
  <div class="col-lg-3 col-sm-auto">
    <li class="filter_btn p-2 py-1 rounded d-flex align-items-center fs-6 dropdown fw-bold">
      <div class='dropdown-toggle fs-7' id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false">Choose
        Category
      </div>
      <ul class="dropdown-menu main-bg" aria-labelledby="dropdownMenuButton1">
        <li>
          <a class="dropdown-item" href="/admin/events/informals">Informals</a>
        </li>
        <li>
          <a class="dropdown-item" href="/admin/events/fine-arts">Fine Arts</a>
        </li>
        <li>
          <a class="dropdown-item" href="/admin/events/performing-arts">Performing
            Arts</a>
        </li>
        <li>
          <a class="dropdown-item" href="/admin/events/gaming">Gaming</a>
        </li>
        <li>
          <a class="dropdown-item" href="/admin/events/sports">Sports</a>
        </li>
        <li>
          <a class="dropdown-item" href="/admin/events/literary-arts">Literary
            Arts</a>
        </li>
        <li>
          <a class="dropdown-item" href="/admin/events/technical-events">Technical
            Events</a>
        </li>
        <li>
          <a class="dropdown-item" href="/admin/events/technical-workshop">Technical
            Workshops</a>
        </li>
        <li>
          <a class="dropdown-item" href="/admin/events/management-events">Managemnet
          </a>
        </li>
        <li>
          <a class="dropdown-item" href="/admin/events/special-events">Special Events
          </a>
        </li>
      </ul>
    </li>
  </div>

</div>
<div id="admin-events" class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4">

  {% for ele in events_list %}
  <div class="col rounded-3">
    <div class="card border-0 bg-teal">
      <div class="d-flex justify-content-center border-bottom border-2 border-dark py-3 m-1">
        <img src={{ele['icon_url']}} height="170px" alt="event-image">
      </div>
      <div class="d-flex flex-column px-3 mt-2">
        <h2 class="sec-font fs-5 my-0 text-brown fw-bold">
          {{ele['event_name']}}
        </h2>
        <p class="sec-font fs-7 mb-1 text-gray fw-bold">{{ele['category']}}</p>
        <p class="sec-font fs-5 text-brown mb-0 fw-bolder">
          {{ele["event_cost"]}} â‚¹
        </p>
      </div>
      <div class="d-flex p-3 mb-2">
        <a href={{"/admin/events/{}/{}/view".format(ele['category'],ele['event_id'])}}
          class="btn btn-dark text-teal fs-7 sec-font">View</a>
        &nbsp;&nbsp;
        <a href={{"/admin/events/{}/{}/delete".format(ele['category'],ele['event_id'])}}
          class="btn btn-outline-danger border-1 rounded-3 fs-7 sec-font">DELETE</a>
      </div>
    </div>
  </div>
  {% endfor %}
</div>

</div>

<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Add New Event</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <form class="modal-body" action='/admin/add-event' method="POST">
        {{form.csrf_token}}
        <div class="row">
          <div class="col-lg-6 col-sm-12">
            <p class="mb-0 fs-7 main-font">
              {{form.id.label}}
            </p>
            {{form.id(class="input_value")}}
          </div>
          <div class="col-lg-6 col-sm-12">
            <p class="mb-0 fs-7 main-font">
              {{form.code.label}}
            </p>
            {{form.code(class="input_value")}}
          </div>
        </div>
        <p class="mb-0 fs-7 main-font">
          {{form.name.label}}
        </p>
        {{form.name(class="input_value")}}
        <p class="mb-0 fs-7 main-font">
          {{form.description.label}}
        </p>
        {{form.description(class="input_value")}}
        <p class="mb-0 fs-7 main-font">
          {{form.rules.label}}
        </p>
        {{form.rules(class="input_value",id="editor")}}
        <p class="mb-0 fs-7 main-font">
          {{form.categoryName.label}}
        </p>
        {{form.categoryName(class="input_value")}}
        <div class="row">
          <div class="col-lg-6 col-sm-12">
            <p class="mb-0 fs-7 main-font">
              {{form.categoryId.label}}
            </p>
            {{form.categoryId(class="input_value")}}
          </div>
          <div class="col-lg-6 col-sm-12">
            <p class="mb-0 fs-7 main-font">
              {{form.pr_points.label}}
            </p>
            {{form.pr_points(class="input_value")}}
          </div>
        </div>
        <div class="row">
          <div class="col-lg-6 col-sm-12">
            <p class="mb-0 fs-7 main-font">
              {{form.date.label}}
            </p>
            {{form.date(class="input_value")}}
          </div>
          <div class="col-lg-6 col-sm-12">
            <p class="mb-0 fs-7 main-font">
              {{form.duration.label}}
            </p>
            {{form.duration(class="input_value")}}
          </div>
        </div>
        <div class="row">
          <div class="col-lg-6 col-sm-12">
            <p class="mb-0 fs-7 main-font">
              {{form.criteria.label}}
            </p>
            {{form.criteria(class="input_value" )}}
          </div>
          <div class="col-lg-6 col-sm-12">
            <p class="mb-0 fs-7 main-font">
              {{form.mode.label}}
            </p>
            {{form.mode(class="input_value")}}
          </div>
        </div>
        <div class="row">
          <div class="col-lg-6 col-sm-12">
            <p class="mb-0 fs-7 main-font">
              {{form.contact1.label}}
            </p>
            {{form.contact1(class="input_value")}}
          </div>
          <div class="col-lg-6 col-sm-12">
            <p class="mb-0 fs-7 main-font">
              {{form.contact2.label}}
            </p>
            {{form.contact2(class="input_value")}}
          </div>
        </div>
        <div class="row">
          <div class="col-lg-6 col-sm-12">
            <p class="mb-0 fs-7 main-font">
              {{form.contact3.label}}
            </p>
            {{form.contact3(class="input_value")}}
          </div>
          <div class="col-lg-6 col-sm-12">
            <p class="mb-0 fs-7 main-font">
              {{form.contact4.label}}
            </p>
            {{form.contact4(class="input_value")}}
          </div>
        </div>
        <p class="mb-0 fs-7 main-font">
          {{form.eventCost.label}}
        </p>
        {{form.eventCost(class="input_value")}}
        <p class="mb-0 fs-7 main-font">
          {{form.perks1.label}}
        </p>
        {{form.perks1(class="input_value")}}
        <p class="mb-0 fs-7 main-font">
          {{form.perks2.label}}
        </p>
        {{form.perks2(class="input_value")}}
        <p class="mb-0 fs-7 main-font">
          {{form.perks3.label}}
        </p>
        {{form.perks3(class="input_value")}}
        <p class="mb-0 fs-7 main-font">
          {{form.icon_url.label}}
        </p>
        {{form.icon_url(class="input_value")}}
        <br />

        <button type="submit" class="normal-button w-100 my-2">
          Save Event
        </button>
      </form>
    </div>
  </div>
</div>

<script defer>
  CKEDITOR.replace('editor');
</script>
{% endblock %}