{% extends 'user_layout.html' %} {% block title %} Alegria 2022 | Cart Page {%
endblock %} {% block content %}
<main class="container-fluid bg-cover min-vh-100">
  <div class="row py-3 px-1 d-flex flex-column align-items-center">
    {% if cart_msg %}
    <!-- cart is empty div -->
    <div class="row py-5 d-flex flex-column align-items-center">
      <img
        src="/static/images/undraw_empty_cart_co35.svg"
        alt="empty cart image"
        height="200px"
      />
      <h2 class="text-center main-font text-red fs-3 py-1 mt-2">
        Looks like your cart is empty
      </h2>
      <p class="text-center text-black sec-font">
        Add some cool merchandise to your cart. You won't regret buying them.
      </p>
    </div>
    {% endif %} {% if !cart_msg %}
    <div class="row mt-2">
      <h2 class="fs-3 main-font mb-0 text-red">
        Your Shopping Cart
        <span class="fs-7 sec-font mx-1"
          >[Total Items {{cart_details['total_items']}} ]</span
        >
      </h2>
    </div>
    <div class="row p-0 m-0">
      <form action="">
        <button
          type="submit"
          class="button fs-7 sec-font mx-1 text-decoration-underline"
        >
          Clear Whole Cart
        </button>
      </form>
    </div>
    <div class="row g-3">
      <div class="col-lg-6 col-sm-12">
        <!-- cart items -->
        {% for key ,product in session['Shoppingcart'].items() %}
        <!--{% if item['type']=="Merchandise" %} -->
        <!-- cart item (merchandise) -->
        <div class="row p-3 g-1 me-1 border-2 border-bottom border-danger">
          <div class="col-lg-5 col-sm-12 d-flex justify-content-center">
            <img
              src="{{product.image}}"
              alt="cart-item-image"
              class="rounded-3"
              width="200px"
              height="200px"
            />
          </div>
          <div class="col-lg-7 col-sm-12 d-flex flex-column">
            <h3 class="fs-5 main-font text-red mb-1">{{product.name}}</h3>
            <div class="d-flex mb-1">
              <p class="sec-font fs-7 pe-1 mb-0">{{product.category}}</p>
              <!--<p class="sec-font fs-7 px-1 mb-0">{{item['id']}}</p>
                            <p class="sec-font fs-7 px-1 mb-0">Quantity: {{item['quantity']}}</p> -->
            </div>
            <div class="d-flex mb-1">
              <p class="sec-font fs-7 pe-1 mb-0">{{product.color}}</p>
              <p class="sec-font fs-7 px-1 mb-0">Size: {{product.size}}</p>
            </div>
            <h3 class="fs-5 main-font text-red mb-1">{{product.cost}} ₹</h3>
            <!-- <form class="my-2" action={{"/remove-from-cart/{}/{}".format(user_id,item['id'])}}>
                            <button type="submit" class="button main-bg text-red fs-6">
                                Remove From Cart
                                <i class="far fa-trash-alt ms-2"></i>
                            </button>
                        </form> -->
          </div>
        </div>
        {% endfor %}

        <!-- {% else %} -->
        <!-- item cart {event} 
                <div class="row p-3 me-1 border-2 border-bottom border-danger">
                    <div class="col-lg-5 col-sm-12">
                        <img src={{item['img_url']}} alt="cart-item-image" class="rounded-3" width="200px"
                            height="200px">
                    </div>
                    <div class="col-lg-7 col-sm-12 d-flex flex-column">
                        <h3 class="fs-5 main-font text-red mb-1">{{item['name']}}</h3>
                        <div class="d-flex mb-1">
                            <p class="sec-font fs-7 pe-1 mb-0">{{item['category']}}</p>
                            <p class="sec-font fs-7 px-1 mb-0">{{item['id']}}</p>
                        </div>
                        <div class="d-flex mb-1">
                            <p class="sec-font fs-7 mb-0">Quantity: {{item['quantity']}}</p>
                        </div>
                        <h3 class="fs-5 main-font text-red mb-1">{{item['price']}} ₹</h3>
                        <form class="my-2" action={{"/remove-from-cart/{}/{}".format(user_id,item['id'])}}>
                            <button type="submit" class="button main-bg text-red fs-6">
                                Remove From Cart
                                <i class="far fa-trash-alt ms-2"></i>
                            </button>
                        </form>
                    </div>
                </div>-->
        {% endif %}
      </div>

      <!-- payment div -->
      <div class="col-lg-6 col-sm-12">
        <div
          class="
            col
            d-flex
            flex-column
            align-items-center
            main-bg
            rounded-3
            p-3
          "
        >
          <div class="row w-100 border-bottom border-2 border-danger mb-2 p-1">
            <div class="col-9 p-0 m-0">
              <p class="main-font mb-0">Total Items In Cart</p>
            </div>
            <div class="col-3 text-end p-0 m-0">
              <p class="main-font mb-0">{{cart_details['total_items']}}</p>
            </div>
          </div>
          <div class="row w-100 border-bottom border-2 border-danger mb-2 p-1">
            <div class="col-9 p-0 m-0">
              <p class="main-font mb-0">Subtotal</p>
            </div>
            <div class="col-3 text-end p-0 m-0">
              <p class="main-font mb-0">{{cart_details['subtotal']}} ₹</p>
            </div>
          </div>
          <div class="row w-100 border-bottom border-2 border-danger mb-2 p-1">
            <div class="col-9 p-0 m-0">
              <p class="main-font mb-0">Coupons Discount</p>
            </div>
            <div class="col-3 text-end p-0 m-0">
              <p class="main-font mb-0">
                {{cart_details['coupon_discount']}} ₹
              </p>
            </div>
          </div>
          <div class="row w-100 border-bottom border-2 border-danger mb-1 p-2">
            <div class="col-9 p-0 m-0">
              <p class="fs-4 main-font mb-0">Total To Pay</p>
            </div>
            <div class="col-3 text-end p-0 m-0">
              <p class="fs-4 main-font mb-0">{{cart_details['to_pay']}} ₹</p>
            </div>
          </div>
          <div class="row w-100 my-2">
            <form class="my-2" action="">
              <button type="submit" class="w-100 button bg-red text-beige fs-6">
                Proceed To Pay {{cart_details['to_pay']}} ₹
                <i class="fas fa-arrow-right ms-2"></i>
              </button>
            </form>
          </div>
        </div>
      </div>
    </div>
    {% endif %}
  </div>
</main>
{% endblock %}
